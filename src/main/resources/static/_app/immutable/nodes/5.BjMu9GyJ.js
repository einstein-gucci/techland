import{s as Ee,n as he,r as ye,c as me}from"../chunks/scheduler.B2kig3xY.js";import{S as Te,i as Ae,e as d,s as M,c as _,l as R,f as P,a as A,d as u,m as h,g as D,h as r,n as Q,o as ee,u as de,t as le,b as ae,j as _e,v as pe}from"../chunks/index.DR8NClmD.js";import{e as W}from"../chunks/each.D6YF6ztN.js";import{j as ke,a as te}from"../chunks/store.BdGEaHuh.js";import{p as Le}from"../chunks/stores.DREtJA4X.js";function ve(s,l,a){const o=s.slice();return o[12]=l[a],o[14]=a,o}function ge(s,l,a){const o=s.slice();return o[3]=l[a],o}function be(s){let l,a,o=s[3].email+"",i,p,n,c=s[3].name+"",k,v;return{c(){l=d("tr"),a=d("td"),i=le(o),p=M(),n=d("td"),k=le(c),v=M()},l(m){l=_(m,"TR",{});var C=A(l);a=_(C,"TD",{});var x=A(a);i=ae(x,o),x.forEach(u),p=P(C),n=_(C,"TD",{});var L=A(n);k=ae(L,c),L.forEach(u),v=P(C),C.forEach(u)},m(m,C){D(m,l,C),r(l,a),r(a,i),r(l,p),r(l,n),r(n,k),r(l,v)},p(m,C){C&4&&o!==(o=m[3].email+"")&&_e(i,o),C&4&&c!==(c=m[3].name+"")&&_e(k,c)},d(m){m&&u(l)}}}function Ce(s){let l,a,o=s[14]+1+"",i,p;return{c(){l=d("li"),a=d("a"),i=le(o),p=M(),this.h()},l(n){l=_(n,"LI",{class:!0});var c=A(l);a=_(c,"A",{class:!0,href:!0});var k=A(a);i=ae(k,o),k.forEach(u),p=P(c),c.forEach(u),this.h()},h(){h(a,"class","page-link"),h(a,"href","/mieter?page="+(s[14]+1)),pe(a,"active",s[0]==s[14]+1),h(l,"class","page-item")},m(n,c){D(n,l,c),r(l,a),r(a,i),r(l,p)},p(n,c){c&1&&pe(a,"active",n[0]==n[14]+1)},d(n){n&&u(l)}}}function Me(s){let l,a="Create Mieter",o,i,p,n,c,k="Email",v,m,C,x,L,j,E="Name",y,T,X,I,ne="Submit",F,V,se="All Mieters",Y,N,S,oe='<tr><th scope="col">Email</th> <th scope="col">Name</th></tr>',Z,z,G,O,w,$,re,U=W(s[2]),g=[];for(let e=0;e<U.length;e+=1)g[e]=be(ge(s,U,e));let q=W(Array(s[1])),b=[];for(let e=0;e<q.length;e+=1)b[e]=Ce(ve(s,q,e));return{c(){l=d("h1"),l.textContent=a,o=M(),i=d("form"),p=d("div"),n=d("div"),c=d("label"),c.textContent=k,v=M(),m=d("input"),C=M(),x=d("div"),L=d("div"),j=d("label"),j.textContent=E,y=M(),T=d("input"),X=M(),I=d("button"),I.textContent=ne,F=M(),V=d("h1"),V.textContent=se,Y=M(),N=d("table"),S=d("thead"),S.innerHTML=oe,Z=M(),z=d("tbody");for(let e=0;e<g.length;e+=1)g[e].c();G=M(),O=d("nav"),w=d("ul");for(let e=0;e<b.length;e+=1)b[e].c();this.h()},l(e){l=_(e,"H1",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1w3081s"&&(l.textContent=a),o=P(e),i=_(e,"FORM",{class:!0});var f=A(i);p=_(f,"DIV",{class:!0});var t=A(p);n=_(t,"DIV",{class:!0});var B=A(n);c=_(B,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(c)!=="svelte-13xn7a2"&&(c.textContent=k),v=P(B),m=_(B,"INPUT",{class:!0,id:!0,type:!0}),B.forEach(u),t.forEach(u),C=P(f),x=_(f,"DIV",{class:!0});var ie=A(x);L=_(ie,"DIV",{class:!0});var J=A(L);j=_(J,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(j)!=="svelte-15kbfjq"&&(j.textContent=E),y=P(J),T=_(J,"INPUT",{class:!0,id:!0,type:!0}),J.forEach(u),ie.forEach(u),X=P(f),I=_(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(I)!=="svelte-1f8j9du"&&(I.textContent=ne),f.forEach(u),F=P(e),V=_(e,"H1",{"data-svelte-h":!0}),R(V)!=="svelte-1htmutc"&&(V.textContent=se),Y=P(e),N=_(e,"TABLE",{class:!0});var K=A(N);S=_(K,"THEAD",{"data-svelte-h":!0}),R(S)!=="svelte-tc0rne"&&(S.innerHTML=oe),Z=P(K),z=_(K,"TBODY",{});var ce=A(z);for(let H=0;H<g.length;H+=1)g[H].l(ce);ce.forEach(u),K.forEach(u),G=P(e),O=_(e,"NAV",{});var ue=A(O);w=_(ue,"UL",{class:!0});var fe=A(w);for(let H=0;H<b.length;H+=1)b[H].l(fe);fe.forEach(u),ue.forEach(u),this.h()},h(){h(l,"class","mt-3"),h(c,"class","form-label"),h(c,"for","email"),h(m,"class","form-control"),h(m,"id","email"),h(m,"type","email"),h(n,"class","col"),h(p,"class","row mb-3"),h(j,"class","form-label"),h(j,"for","name"),h(T,"class","form-control"),h(T,"id","name"),h(T,"type","text"),h(L,"class","col"),h(x,"class","row mb-3"),h(I,"type","button"),h(I,"class","btn btn-primary"),h(i,"class","mb-5"),h(N,"class","table"),h(w,"class","pagination")},m(e,f){D(e,l,f),D(e,o,f),D(e,i,f),r(i,p),r(p,n),r(n,c),r(n,v),r(n,m),Q(m,s[3].email),r(i,C),r(i,x),r(x,L),r(L,j),r(L,y),r(L,T),Q(T,s[3].name),r(i,X),r(i,I),D(e,F,f),D(e,V,f),D(e,Y,f),D(e,N,f),r(N,S),r(N,Z),r(N,z);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(z,null);D(e,G,f),D(e,O,f),r(O,w);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(w,null);$||(re=[ee(m,"input",s[7]),ee(T,"input",s[8]),ee(I,"click",s[4])],$=!0)},p(e,[f]){if(f&8&&m.value!==e[3].email&&Q(m,e[3].email),f&8&&T.value!==e[3].name&&Q(T,e[3].name),f&4){U=W(e[2]);let t;for(t=0;t<U.length;t+=1){const B=ge(e,U,t);g[t]?g[t].p(B,f):(g[t]=be(B),g[t].c(),g[t].m(z,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=U.length}if(f&3){q=W(Array(e[1]));let t;for(t=0;t<q.length;t+=1){const B=ve(e,q,t);b[t]?b[t].p(B,f):(b[t]=Ce(B),b[t].c(),b[t].m(w,null))}for(;t<b.length;t+=1)b[t].d(1);b.length=q.length}},i:he,o:he,d(e){e&&(u(l),u(o),u(i),u(F),u(V),u(Y),u(N),u(G),u(O)),de(g,e),de(b,e),$=!1,ye(re)}}}let Pe=4;function xe(s,l,a){let o,i;me(s,ke,E=>a(5,o=E)),me(s,Le,E=>a(6,i=E));const p=i.url.origin;let n,c=0,k=[],v={email:null,name:null};function m(){let E=`?pageSize=${Pe}&pageNumber=${n}`;var y={method:"get",url:`${p}/api/mieter${E}`,headers:{Authorization:`Bearer ${o}`}};te(y).then(function(T){a(2,k=T.data.content),a(1,c=T.data.totalPages)}).catch(function(T){alert("Could not get mieters"),console.log(T)})}function C(){var E={method:"get",url:"https://disify.com/api/email/"+v.email};te(E).then(function(y){console.log("Validated email "+v.email),console.log(y.data),y.data.format&&!y.data.disposable&&y.data.dns?x():alert("Email "+v.email+" is not valid.")}).catch(function(y){alert("Could not validate email"),console.log(y)})}function x(){var E={method:"post",url:`${p}/api/mieter`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},data:v};te(E).then(function(y){alert("Mieter created"),m()}).catch(function(y){alert("Could not create mieter"),console.log(y)})}function L(){v.email=this.value,a(3,v)}function j(){v.name=this.value,a(3,v)}return s.$$.update=()=>{if(s.$$.dirty&96&&o!==""){let E=i.url.searchParams;E.has("page")?a(0,n=E.get("page")):a(0,n="1"),m()}},[n,c,k,v,C,o,i,L,j]}class Ve extends Te{constructor(l){super(),Ae(this,l,xe,Me,Ee,{})}}export{Ve as component};
