import{s as Ge,n as we,r as Je,c as ze}from"../chunks/scheduler.BoBRsoSY.js";import{S as Ke,i as Qe,e as r,s as D,c as o,a as f,l as j,f as x,d,k as s,g as ye,h as e,m as ne,n as pe,p as We,u as He,t as be,b as Ce,j as Se,v as Oe}from"../chunks/index.mzkCDYCb.js";import{e as re}from"../chunks/each.D6YF6ztN.js";import{j as Xe,a as ge}from"../chunks/store.D0fbB2Vf.js";import{p as Ze}from"../chunks/stores.CmxFwODC.js";function Ue(i,l,a){const u=i.slice();return u[12]=l[a],u[14]=a,u}function Re(i,l,a){const u=i.slice();return u[3]=l[a],u}function Fe(i){let l,a,u=i[3].email+"",g,h,c,v=i[3].name+"",p,m;return{c(){l=r("tr"),a=r("td"),g=be(u),h=D(),c=r("td"),p=be(v),m=D()},l(I){l=o(I,"TR",{});var E=f(l);a=o(E,"TD",{});var A=f(a);g=Ce(A,u),A.forEach(d),h=x(E),c=o(E,"TD",{});var b=f(c);p=Ce(b,v),b.forEach(d),m=x(E),E.forEach(d)},m(I,E){ye(I,l,E),e(l,a),e(a,g),e(l,h),e(l,c),e(c,p),e(l,m)},p(I,E){E&4&&u!==(u=I[3].email+"")&&Se(g,u),E&4&&v!==(v=I[3].name+"")&&Se(p,v)},d(I){I&&d(l)}}}function Ye(i){let l,a,u=i[14]+1+"",g,h;return{c(){l=r("li"),a=r("a"),g=be(u),h=D(),this.h()},l(c){l=o(c,"LI",{class:!0});var v=f(l);a=o(v,"A",{class:!0,href:!0});var p=f(a);g=Ce(p,u),p.forEach(d),h=x(v),v.forEach(d),this.h()},h(){s(a,"class","page-link svelte-ey6csl"),s(a,"href","/mieter?page="+(i[14]+1)),Oe(a,"active",i[0]==i[14]+1),s(l,"class","page-item")},m(c,v){ye(c,l,v),e(l,a),e(a,g),e(l,h)},p(c,v){v&1&&Oe(a,"active",c[0]==c[14]+1)},d(c){c&&d(l)}}}function $e(i){let l,a,u="üßëüèª‚Äçüíº Mieter",g,h,c,v,p,m,I="Neuer Mieter",E,A,b,T,_,V="Email",N,P,oe,S,Ee="Please provide an e-mail address.",ie,L,B,De="Name",ce,M,de,O,xe="Please provide a name.",ue,q,Ie="Submit",ve,U,Ve="üìã Alle Mieter",fe,Y,G,J,w,z,K,ke='<tr><th scope="col">Email</th> <th scope="col">Name</th></tr>',he,Q,me,te,R,_e,Te,W=re(i[2]),C=[];for(let n=0;n<W.length;n+=1)C[n]=Fe(Re(i,W,n));let X=re(Array(i[1])),y=[];for(let n=0;n<X.length;n+=1)y[n]=Ye(Ue(i,X,n));return{c(){l=r("div"),a=r("h1"),a.textContent=u,g=D(),h=r("div"),c=r("div"),v=r("div"),p=r("div"),m=r("div"),m.textContent=I,E=D(),A=r("div"),b=r("form"),T=r("div"),_=r("label"),_.textContent=V,N=D(),P=r("input"),oe=D(),S=r("div"),S.textContent=Ee,ie=D(),L=r("div"),B=r("label"),B.textContent=De,ce=D(),M=r("input"),de=D(),O=r("div"),O.textContent=xe,ue=D(),q=r("button"),q.textContent=Ie,ve=D(),U=r("h1"),U.textContent=Ve,fe=D(),Y=r("div"),G=r("div"),J=r("div"),w=r("div"),z=r("table"),K=r("thead"),K.innerHTML=ke,he=D(),Q=r("tbody");for(let n=0;n<C.length;n+=1)C[n].c();me=D(),te=r("nav"),R=r("ul");for(let n=0;n<y.length;n+=1)y[n].c();this.h()},l(n){l=o(n,"DIV",{class:!0});var k=f(l);a=o(k,"H1",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-1uoe6i6"&&(a.textContent=u),g=x(k),h=o(k,"DIV",{class:!0});var t=f(h);c=o(t,"DIV",{class:!0});var H=f(c);v=o(H,"DIV",{class:!0});var Ae=f(v);p=o(Ae,"DIV",{class:!0});var ae=f(p);m=o(ae,"DIV",{class:!0,"data-svelte-h":!0}),j(m)!=="svelte-2yrqx6"&&(m.textContent=I),E=x(ae),A=o(ae,"DIV",{class:!0});var Pe=f(A);b=o(Pe,"FORM",{class:!0});var Z=f(b);T=o(Z,"DIV",{class:!0});var $=f(T);_=o($,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(_)!=="svelte-7zanfm"&&(_.textContent=V),N=x($),P=o($,"INPUT",{class:!0,id:!0,type:!0}),oe=x($),S=o($,"DIV",{class:!0,"data-svelte-h":!0}),j(S)!=="svelte-1t7tm55"&&(S.textContent=Ee),$.forEach(d),ie=x(Z),L=o(Z,"DIV",{class:!0});var ee=f(L);B=o(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(B)!=="svelte-17mpp60"&&(B.textContent=De),ce=x(ee),M=o(ee,"INPUT",{class:!0,id:!0,type:!0}),de=x(ee),O=o(ee,"DIV",{class:!0,"data-svelte-h":!0}),j(O)!=="svelte-twafyh"&&(O.textContent=xe),ee.forEach(d),ue=x(Z),q=o(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(q)!=="svelte-kscvqj"&&(q.textContent=Ie),Z.forEach(d),Pe.forEach(d),ae.forEach(d),Ae.forEach(d),H.forEach(d),ve=x(t),U=o(t,"H1",{class:!0,"data-svelte-h":!0}),j(U)!=="svelte-124kyp6"&&(U.textContent=Ve),fe=x(t),Y=o(t,"DIV",{class:!0});var Me=f(Y);G=o(Me,"DIV",{class:!0});var Le=f(G);J=o(Le,"DIV",{class:!0});var je=f(J);w=o(je,"DIV",{class:!0});var le=f(w);z=o(le,"TABLE",{class:!0});var se=f(z);K=o(se,"THEAD",{"data-svelte-h":!0}),j(K)!=="svelte-1p3x9mi"&&(K.innerHTML=ke),he=x(se),Q=o(se,"TBODY",{});var Ne=f(Q);for(let F=0;F<C.length;F+=1)C[F].l(Ne);Ne.forEach(d),se.forEach(d),me=x(le),te=o(le,"NAV",{});var Be=f(te);R=o(Be,"UL",{class:!0});var qe=f(R);for(let F=0;F<y.length;F+=1)y[F].l(qe);qe.forEach(d),Be.forEach(d),le.forEach(d),je.forEach(d),Le.forEach(d),Me.forEach(d),t.forEach(d),k.forEach(d),this.h()},h(){s(a,"class","svelte-ey6csl"),s(m,"class","card-header svelte-ey6csl"),s(_,"for","email"),s(_,"class","form-label"),s(P,"class","form-control"),s(P,"id","email"),s(P,"type","email"),P.required=!0,s(S,"class","invalid-feedback"),s(T,"class","mb-3"),s(B,"for","name"),s(B,"class","form-label"),s(M,"class","form-control"),s(M,"id","name"),s(M,"type","text"),M.required=!0,s(O,"class","invalid-feedback"),s(L,"class","mb-3"),s(q,"type","submit"),s(q,"class","btn btn-primary svelte-ey6csl"),s(b,"class","needs-validation"),b.noValidate=!0,s(A,"class","card-body"),s(p,"class","card svelte-ey6csl"),s(v,"class","col-md-8"),s(c,"class","row justify-content-center"),s(U,"class","svelte-ey6csl"),s(z,"class","table"),s(R,"class","pagination svelte-ey6csl"),s(w,"class","card-body"),s(J,"class","card svelte-ey6csl"),s(G,"class","col-md-8"),s(Y,"class","row justify-content-center"),s(h,"class","container"),s(l,"class","background svelte-ey6csl")},m(n,k){ye(n,l,k),e(l,a),e(l,g),e(l,h),e(h,c),e(c,v),e(v,p),e(p,m),e(p,E),e(p,A),e(A,b),e(b,T),e(T,_),e(T,N),e(T,P),ne(P,i[3].email),e(T,oe),e(T,S),e(b,ie),e(b,L),e(L,B),e(L,ce),e(L,M),ne(M,i[3].name),e(L,de),e(L,O),e(b,ue),e(b,q),e(h,ve),e(h,U),e(h,fe),e(h,Y),e(Y,G),e(G,J),e(J,w),e(w,z),e(z,K),e(z,he),e(z,Q);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(Q,null);e(w,me),e(w,te),e(te,R);for(let t=0;t<y.length;t+=1)y[t]&&y[t].m(R,null);_e||(Te=[pe(P,"input",i[7]),pe(M,"input",i[8]),pe(b,"submit",We(i[4]))],_e=!0)},p(n,[k]){if(k&8&&P.value!==n[3].email&&ne(P,n[3].email),k&8&&M.value!==n[3].name&&ne(M,n[3].name),k&4){W=re(n[2]);let t;for(t=0;t<W.length;t+=1){const H=Re(n,W,t);C[t]?C[t].p(H,k):(C[t]=Fe(H),C[t].c(),C[t].m(Q,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=W.length}if(k&3){X=re(Array(n[1]));let t;for(t=0;t<X.length;t+=1){const H=Ue(n,X,t);y[t]?y[t].p(H,k):(y[t]=Ye(H),y[t].c(),y[t].m(R,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=X.length}},i:we,o:we,d(n){n&&d(l),He(C,n),He(y,n),_e=!1,Je(Te)}}}let et=4;function tt(i,l,a){let u,g;ze(i,Xe,_=>a(5,u=_)),ze(i,Ze,_=>a(6,g=_));const h=g.url.origin;let c,v=0,p=[],m={email:null,name:null};function I(){let _=`?pageSize=${et}&pageNumber=${c}`;var V={method:"get",url:`${h}/api/mieter${_}`,headers:{Authorization:`Bearer ${u}`}};ge(V).then(function(N){a(2,p=N.data.content),a(1,v=N.data.totalPages)}).catch(function(N){alert("Could not get mieters"),console.log(N)})}function E(){var _={method:"get",url:"https://disify.com/api/email/"+m.email};ge(_).then(function(V){console.log("Validated email "+m.email),console.log(V.data),V.data.format&&!V.data.disposable&&V.data.dns?A():alert("Email "+m.email+" is not valid.")}).catch(function(V){alert("Could not validate email"),console.log(V)})}function A(){var _={method:"post",url:`${h}/api/mieter`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},data:m};ge(_).then(function(V){alert("Mieter created"),I()}).catch(function(V){alert("Could not create mieter"),console.log(V)})}function b(){m.email=this.value,a(3,m)}function T(){m.name=this.value,a(3,m)}return i.$$.update=()=>{if(i.$$.dirty&96&&u!==""){let _=g.url.searchParams;_.has("page")?a(0,c=_.get("page")):a(0,c="1"),I()}},[c,v,p,m,E,u,g,b,T]}class ot extends Ke{constructor(l){super(),Qe(this,l,tt,$e,Ge,{})}}export{ot as component};
