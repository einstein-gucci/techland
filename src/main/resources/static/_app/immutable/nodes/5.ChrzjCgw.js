import{s as Ge,n as ze,r as Je,c as we}from"../chunks/scheduler.BoBRsoSY.js";import{S as Ke,i as Qe,e as r,s as D,c as o,a as m,l as j,f as I,d as h,k as n,g as ke,h as e,m as oe,n as de,p as We,u as He,t as Ce,b as Ee,j as Oe,v as Se}from"../chunks/index.mzkCDYCb.js";import{e as ie}from"../chunks/each.D6YF6ztN.js";import{j as Xe,a as ce}from"../chunks/store.D0fbB2Vf.js";import{p as Ze}from"../chunks/stores.DmHXfTTB.js";function Ue(c,l,s){const f=c.slice();return f[14]=l[s],f[16]=s,f}function Re(c,l,s){const f=c.slice();return f[3]=l[s],f}function Fe(c){let l,s,f=c[3].email+"",C,p,u,v=c[3].name+"",g,_,M,V,P="L√∂schen",b,y,T;function Y(){return c[10](c[3])}return{c(){l=r("tr"),s=r("td"),C=Ce(f),p=D(),u=r("td"),g=Ce(v),_=D(),M=r("td"),V=r("button"),V.textContent=P,b=D(),this.h()},l(d){l=o(d,"TR",{});var a=m(l);s=o(a,"TD",{});var x=m(s);C=Ee(x,f),x.forEach(h),p=I(a),u=o(a,"TD",{});var B=m(u);g=Ee(B,v),B.forEach(h),_=I(a),M=o(a,"TD",{});var ae=m(M);V=o(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),j(V)!=="svelte-so475k"&&(V.textContent=P),ae.forEach(h),b=I(a),a.forEach(h),this.h()},h(){n(V,"class","btn btn-danger btn-sm")},m(d,a){ke(d,l,a),e(l,s),e(s,C),e(l,p),e(l,u),e(u,g),e(l,_),e(l,M),e(M,V),e(l,b),y||(T=de(V,"click",Y),y=!0)},p(d,a){c=d,a&4&&f!==(f=c[3].email+"")&&Oe(C,f),a&4&&v!==(v=c[3].name+"")&&Oe(g,v)},d(d){d&&h(l),y=!1,T()}}}function Ye(c){let l,s,f=c[16]+1+"",C,p;return{c(){l=r("li"),s=r("a"),C=Ce(f),p=D(),this.h()},l(u){l=o(u,"LI",{class:!0});var v=m(l);s=o(v,"A",{class:!0,href:!0});var g=m(s);C=Ee(g,f),g.forEach(h),p=I(v),v.forEach(h),this.h()},h(){n(s,"class","page-link svelte-1rpkpmt"),n(s,"href","/mieter?page="+(c[16]+1)),Se(s,"active",c[0]==c[16]+1),n(l,"class","page-item")},m(u,v){ke(u,l,v),e(l,s),e(s,C),e(l,p)},p(u,v){v&1&&Se(s,"active",u[0]==u[16]+1)},d(u){u&&h(l)}}}function $e(c){let l,s,f="üßëüèª‚Äçüíº Mieter",C,p,u,v,g,_,M="Neuer Mieter",V,P,b,y,T,Y="Email",d,a,x,B,ae="Please provide an e-mail address.",ue,N,q,ye="Name",he,L,fe,S,De="Please provide a name.",ve,z,Ie="Submit",me,U,Ve="üìã Alle Mieter",pe,G,J,K,w,H,Q,xe='<tr><th scope="col">Email</th> <th scope="col">Name</th> <th scope="col">Actions</th></tr>',_e,W,ge,le,R,be,Te,X=ie(c[2]),E=[];for(let i=0;i<X.length;i+=1)E[i]=Fe(Re(c,X,i));let Z=ie(Array(c[1])),k=[];for(let i=0;i<Z.length;i+=1)k[i]=Ye(Ue(c,Z,i));return{c(){l=r("div"),s=r("h1"),s.textContent=f,C=D(),p=r("div"),u=r("div"),v=r("div"),g=r("div"),_=r("div"),_.textContent=M,V=D(),P=r("div"),b=r("form"),y=r("div"),T=r("label"),T.textContent=Y,d=D(),a=r("input"),x=D(),B=r("div"),B.textContent=ae,ue=D(),N=r("div"),q=r("label"),q.textContent=ye,he=D(),L=r("input"),fe=D(),S=r("div"),S.textContent=De,ve=D(),z=r("button"),z.textContent=Ie,me=D(),U=r("h1"),U.textContent=Ve,pe=D(),G=r("div"),J=r("div"),K=r("div"),w=r("div"),H=r("table"),Q=r("thead"),Q.innerHTML=xe,_e=D(),W=r("tbody");for(let i=0;i<E.length;i+=1)E[i].c();ge=D(),le=r("nav"),R=r("ul");for(let i=0;i<k.length;i+=1)k[i].c();this.h()},l(i){l=o(i,"DIV",{class:!0});var A=m(l);s=o(A,"H1",{class:!0,"data-svelte-h":!0}),j(s)!=="svelte-1uoe6i6"&&(s.textContent=f),C=I(A),p=o(A,"DIV",{class:!0});var t=m(p);u=o(t,"DIV",{class:!0});var O=m(u);v=o(O,"DIV",{class:!0});var Ae=m(v);g=o(Ae,"DIV",{class:!0});var se=m(g);_=o(se,"DIV",{class:!0,"data-svelte-h":!0}),j(_)!=="svelte-2yrqx6"&&(_.textContent=M),V=I(se),P=o(se,"DIV",{class:!0});var Me=m(P);b=o(Me,"FORM",{class:!0});var $=m(b);y=o($,"DIV",{class:!0});var ee=m(y);T=o(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(T)!=="svelte-7zanfm"&&(T.textContent=Y),d=I(ee),a=o(ee,"INPUT",{class:!0,id:!0,type:!0}),x=I(ee),B=o(ee,"DIV",{class:!0,"data-svelte-h":!0}),j(B)!=="svelte-1t7tm55"&&(B.textContent=ae),ee.forEach(h),ue=I($),N=o($,"DIV",{class:!0});var te=m(N);q=o(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(q)!=="svelte-17mpp60"&&(q.textContent=ye),he=I(te),L=o(te,"INPUT",{class:!0,id:!0,type:!0}),fe=I(te),S=o(te,"DIV",{class:!0,"data-svelte-h":!0}),j(S)!=="svelte-twafyh"&&(S.textContent=De),te.forEach(h),ve=I($),z=o($,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(z)!=="svelte-kscvqj"&&(z.textContent=Ie),$.forEach(h),Me.forEach(h),se.forEach(h),Ae.forEach(h),O.forEach(h),me=I(t),U=o(t,"H1",{class:!0,"data-svelte-h":!0}),j(U)!=="svelte-124kyp6"&&(U.textContent=Ve),pe=I(t),G=o(t,"DIV",{class:!0});var Pe=m(G);J=o(Pe,"DIV",{class:!0});var Le=m(J);K=o(Le,"DIV",{class:!0});var Be=m(K);w=o(Be,"DIV",{class:!0});var ne=m(w);H=o(ne,"TABLE",{class:!0});var re=m(H);Q=o(re,"THEAD",{"data-svelte-h":!0}),j(Q)!=="svelte-u7dgbx"&&(Q.innerHTML=xe),_e=I(re),W=o(re,"TBODY",{});var Ne=m(W);for(let F=0;F<E.length;F+=1)E[F].l(Ne);Ne.forEach(h),re.forEach(h),ge=I(ne),le=o(ne,"NAV",{});var je=m(le);R=o(je,"UL",{class:!0});var qe=m(R);for(let F=0;F<k.length;F+=1)k[F].l(qe);qe.forEach(h),je.forEach(h),ne.forEach(h),Be.forEach(h),Le.forEach(h),Pe.forEach(h),t.forEach(h),A.forEach(h),this.h()},h(){n(s,"class","svelte-1rpkpmt"),n(_,"class","card-header svelte-1rpkpmt"),n(T,"for","email"),n(T,"class","form-label"),n(a,"class","form-control"),n(a,"id","email"),n(a,"type","email"),a.required=!0,n(B,"class","invalid-feedback"),n(y,"class","mb-3"),n(q,"for","name"),n(q,"class","form-label"),n(L,"class","form-control"),n(L,"id","name"),n(L,"type","text"),L.required=!0,n(S,"class","invalid-feedback"),n(N,"class","mb-3"),n(z,"type","submit"),n(z,"class","btn btn-primary svelte-1rpkpmt"),n(b,"class","needs-validation"),b.noValidate=!0,n(P,"class","card-body"),n(g,"class","card svelte-1rpkpmt"),n(v,"class","col-md-8"),n(u,"class","row justify-content-center"),n(U,"class","svelte-1rpkpmt"),n(H,"class","table"),n(R,"class","pagination svelte-1rpkpmt"),n(w,"class","card-body"),n(K,"class","card svelte-1rpkpmt"),n(J,"class","col-md-8"),n(G,"class","row justify-content-center"),n(p,"class","container"),n(l,"class","background svelte-1rpkpmt")},m(i,A){ke(i,l,A),e(l,s),e(l,C),e(l,p),e(p,u),e(u,v),e(v,g),e(g,_),e(g,V),e(g,P),e(P,b),e(b,y),e(y,T),e(y,d),e(y,a),oe(a,c[3].email),e(y,x),e(y,B),e(b,ue),e(b,N),e(N,q),e(N,he),e(N,L),oe(L,c[3].name),e(N,fe),e(N,S),e(b,ve),e(b,z),e(p,me),e(p,U),e(p,pe),e(p,G),e(G,J),e(J,K),e(K,w),e(w,H),e(H,Q),e(H,_e),e(H,W);for(let t=0;t<E.length;t+=1)E[t]&&E[t].m(W,null);e(w,ge),e(w,le),e(le,R);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(R,null);be||(Te=[de(a,"input",c[8]),de(L,"input",c[9]),de(b,"submit",We(c[4]))],be=!0)},p(i,[A]){if(A&8&&a.value!==i[3].email&&oe(a,i[3].email),A&8&&L.value!==i[3].name&&oe(L,i[3].name),A&36){X=ie(i[2]);let t;for(t=0;t<X.length;t+=1){const O=Re(i,X,t);E[t]?E[t].p(O,A):(E[t]=Fe(O),E[t].c(),E[t].m(W,null))}for(;t<E.length;t+=1)E[t].d(1);E.length=X.length}if(A&3){Z=ie(Array(i[1]));let t;for(t=0;t<Z.length;t+=1){const O=Ue(i,Z,t);k[t]?k[t].p(O,A):(k[t]=Ye(O),k[t].c(),k[t].m(R,null))}for(;t<k.length;t+=1)k[t].d(1);k.length=Z.length}},i:ze,o:ze,d(i){i&&h(l),He(E,i),He(k,i),be=!1,Je(Te)}}}let et=4;function tt(c,l,s){let f,C;we(c,Xe,d=>s(6,f=d)),we(c,Ze,d=>s(7,C=d));const p=C.url.origin;let u,v=0,g=[],_={email:null,name:null};function M(){let d=`?pageSize=${et}&pageNumber=${u}`;var a={method:"get",url:`${p}/api/mieter${d}`,headers:{Authorization:`Bearer ${f}`}};ce(a).then(function(x){s(2,g=x.data.content),s(1,v=x.data.totalPages)}).catch(function(x){alert("Could not get mieters"),console.log(x)})}function V(){var d={method:"get",url:"https://disify.com/api/email/"+_.email};ce(d).then(function(a){console.log("Validated email "+_.email),console.log(a.data),a.data.format&&!a.data.disposable&&a.data.dns?P():alert("Email "+_.email+" is not valid.")}).catch(function(a){alert("Could not validate email"),console.log(a)})}function P(){var d={method:"post",url:`${p}/api/mieter`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},data:_};ce(d).then(function(a){alert("Mieter created"),M()}).catch(function(a){alert("Could not create mieter"),console.log(a)})}function b(d){var a={method:"delete",url:`${p}/api/mieter/${d}`,headers:{Authorization:`Bearer ${f}`}};ce(a).then(function(x){alert("Mieter deleted"),M()}).catch(function(x){alert("Could not delete mieter"),console.log(x)})}function y(){_.email=this.value,s(3,_)}function T(){_.name=this.value,s(3,_)}const Y=d=>b(d.id);return c.$$.update=()=>{if(c.$$.dirty&192&&f!==""){let d=C.url.searchParams;d.has("page")?s(0,u=d.get("page")):s(0,u="1"),M()}},[u,v,g,_,V,b,f,C,y,T,Y]}class ot extends Ke{constructor(l){super(),Qe(this,l,tt,$e,Ge,{})}}export{ot as component};
